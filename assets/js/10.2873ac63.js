(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{255:function(t,s,a){t.exports=a.p+"assets/img/pokemon.e795529f.jpeg"},280:function(t,s,a){"use strict";a.r(s);var n=a(4),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"你是哪个宝可梦？进程运行时的id研究"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#你是哪个宝可梦？进程运行时的id研究"}},[t._v("#")]),t._v(" 你是哪个宝可梦？进程运行时的ID研究")]),t._v(" "),n("p",[n("img",{attrs:{src:a(255),alt:"pokemon"}})]),t._v(" "),n("p",[t._v("Unix 系统里的ID在运行的过程中，有三种不同的ID。首先是Real user ID（ruid），这个id是在"),n("code",[t._v("/etc/passwd")]),t._v("里出现的.")]),t._v(" "),n("div",{staticClass:"language-plain extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("cat /etc/passwd\n...\nphao:x:1000:1000:phao,,,:/home/phao:/bin/bash\n...\n")])])]),n("p",[t._v("这里可以看到我的用户id是1000，这就是real user id。")]),t._v(" "),n("p",[t._v("第二个id是effective id，这个id是运行时的判断，apue书里举了一个例子。修改密码这个操作，需要的是root权限，但是每个用户也应当允许修改自己的密码，用户会调用passwd程序，修改好密码之后要对"),n("code",[t._v("/etc/passwd")]),t._v("或"),n("code",[t._v("/etc/shadow")]),t._v("进行修改，但是这两个文件的属主都是 root 用户， id = 0. 普通用户，比如id=1000的你（ruid），允许运行passwd程序，但是一般情况下，你运行的程序会说，运行我的是1000用户，当它要写文件的时候，也是以1000用户的身份去写的。它去写文件，没有权限，这个操作就失败了。")]),t._v(" "),n("p",[t._v("显然，passwd就不能这样，它作为一个特殊程序，要代理你的操作，然后提权，才能把用户修改的新密码写入到系统文件里去。effective user id（euid），就是这个作用，进程操作资源的时候，检测的是euid，它可以不同于ruid。")]),t._v(" "),n("p",[t._v("运行 ls，发现passwd有一个特殊的权限位 s，这个叫做set user id bit。")]),t._v(" "),n("div",{staticClass:"language-plain extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("phao@srazer:~$ l /usr/bin/passwd\n-rwsr-xr-x 1 root root 59640 Mar 22  2019 /usr/bin/passwd*\n")])])]),n("p",[t._v("这个s发生在了本来应该是x的地方（rwx），意思是当运行passwd程序的时候，进行set user id操作，这个操作就是把effective id设置为文件属主，我的用户id是1000（ruid）,但是这个文件的属主是0（root），那么我运行passwd，进程得到的euid是passwd文件的属主0，也即root用户，密码输入之后，euid为0的进程，去修改一个owner id为0的文件，是可以顺利操作的。")]),t._v(" "),n("p",[t._v("我们也写一个类似passwd的程序，然后print(geteuid())，看看euid是不是真的变成了0。")]),t._v(" "),n("p",[t._v("假设此程序叫做euid_test。")]),t._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[n("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("#"),n("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("<unistd.h>")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("#"),n("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("<stdio.h>")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ruid is : %d\\n"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getuid")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"euid is : %d\\n"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("geteuid")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("把它的owner设置成root，然后设置set uid位，运行即可观察：")]),t._v(" "),n("div",{staticClass:"language-plain extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("phao@srazer:~/p$ sudo chown root:root euid_test\nphao@srazer:~/p$ sudo chmod +s euid_test\nphao@srazer:~/p$ ls -l euid_test\n-rwsr-sr-x 1 root root 8392 Jan  1 11:41 euid_test\nphao@srazer:~/p$ ./euid_test\nruid is : 1000\neuid is : 0\n")])])]),n("p",[t._v("那么问题来了，binary如此，脚本程序也可以设置set uid big达到效果吗？答案是，不行，脚本程序不能通过设置set user id bit来进行euid的切换，是基于security的"),n("a",{attrs:{href:"https://unix.stackexchange.com/questions/364/allow-setuid-on-shell-scripts?answertab=votes#tab-top",target:"_blank",rel:"noopener noreferrer"}},[t._v("原因"),n("OutboundLink")],1),t._v("设计成这样的。。")]),t._v(" "),n("p",[t._v("我们用python脚本来尝试一下。")]),t._v(" "),n("div",{staticClass:"language-python extra-class"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[t._v("phao@srazer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),t._v("$ cat euid_test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("py\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#!/usr/bin/python3")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" os\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ruid is :"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" os"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getuid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"euid is :"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" os"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("geteuid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nphao@srazer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),t._v("$ ls "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("l euid_test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("py\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("rwsr"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("sr"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("x "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("94")]),t._v(" Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("03")]),t._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("py\n\nphao@srazer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),t._v("$ "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("euid_test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("py\nuid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v("\neuid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v("\n")])])]),n("p",[t._v("如果我"),n("a",{attrs:{href:"https://stackoverflow.com/questions/39913847/is-there-a-way-to-compile-python-application-into-static-binary",target:"_blank",rel:"noopener noreferrer"}},[t._v("把这个python脚本编译成一个binary"),n("OutboundLink")],1),t._v("来运行呢？是的，和c编译出来的binary一样，可以成功切换euid。")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("phao@srazer:~$ ls -l test\n-rwsr-sr-x 1 root root 25856 Dec 31 17:57 test\nphao@srazer:~$ ./test\n('uid:', 1000)\n('euid:', 0)\n")])])]),n("p",[t._v("但是如果你需要在ruid和切换到的euid之间左右横跳呢？你写了一个程序，有时候是用root做一些操作，有时候又想用自己的身份，创建一个文件。系统调用seteuid允许你设置自己当前的effective id。")]),t._v(" "),n("p",[t._v("比如上面的test程序，ruid=phao, 运行起来之后euid=root,然后我想以phao的身份创建一个文件，我可以在运行的过程中seteuid(1000), 来切换身份，文件操作结束之后，我继续用root的身份作威作福，可以seteuid(0).")]),t._v(" "),n("p",[t._v("ruid是root的话，seteuid可以用来切换成任何用户。但是作为普通用户，seteuid随意切换成任意人的身份，肯定是受限的。所以当进程运行起来的时候，其实有第三个id，叫做saved set-user-id，它的意思是，这个进程运行起来的时候，由于程序binary文件有s bit，进行了euid的切换，我先给他存个这个euid的备份，一会进程切换身份的时候，就和我这个备份比一比，它的euid只允许在ruid和我这个saved set-user-id之间切换，不能随意切换成任意人的身份。")]),t._v(" "),n("p",[t._v("当saved set-user-id是0的时候，即root的时候，ruid的普通用户其实也能切换成任意id了，因为你都有root的euid了，限制这个没有意义。")]),t._v(" "),n("p",[t._v("但是当saved set-user-id是普通用户的时候，就真的只能在你们两个屌丝之间切换了。")]),t._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[t._v("phao@srazer"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p$ cat euid_switch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("c\n"),n("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("#"),n("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("<unistd.h>")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("#"),n("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("<stdio.h>")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" uid"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getuid")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" euid"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("geteuid")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ruid is : %d\\n"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" uid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"euid is : %d\\n"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" euid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("seteuid")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Set euid to ruid.\\n"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"euid: %d\\n"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("geteuid")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("seteuid")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("euid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Set euid to saved set-user-id.\\n"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"euid: %d\\n"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("geteuid")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("seteuid")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Set euid to a uid=1.\\n"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"euid: %d\\n"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("geteuid")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("div",{staticClass:"language-python extra-class"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[t._v("phao@srazer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p$ gcc euid_switch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("c  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("o euid_switch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" sudo chown root"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("root euid_switch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" sudo chmod "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("s euid_switch \nphao@srazer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p$ "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("euid_switch \nruid "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("is")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v("\neuid "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("is")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nSet euid to ruid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\neuid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v("\nSet euid to saved "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("set")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("user"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\neuid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nSet euid to a uid"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\neuid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" 我ruid是"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 因为有saved "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("set")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("user"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("罩着，我切成"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("也是可以的。\n")])])]),n("div",{staticClass:"language-python extra-class"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[t._v("phao@srazer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p$ gcc euid_switch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("c  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("o euid_switch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" sudo chown solo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("solo euid_switch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" sudo chmod "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("s euid_switch \nphao@srazer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p$ "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("euid_switch \nruid "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("is")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v("\neuid "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("is")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1001")]),t._v("\nSet euid to ruid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\neuid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v("\nSet euid to saved "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("set")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("user"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\neuid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1001")]),t._v("\nSet euid to a uid"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\neuid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1001")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" 我ruid是"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" saved "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("set")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("user"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1001")]),t._v("也是个屌丝，我切成"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("压根没用\n")])])]),n("p",[t._v("太真实了，牛逼的朋友（root）借我一张身份卡，我可以切换成各种低级身份，而我上铺的兄弟，就只能和我自嗨。")])])}),[],!1,null,null,null);s.default=e.exports}}]);